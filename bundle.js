/*! For license information please see bundle.js.LICENSE.txt */
!function(){var e={25:function(e,t,n){const o=n(944),s=document.getElementById("postInput"),i=document.getElementById("coordinateModal"),a=document.getElementById("okButton"),r=document.getElementById("cancelButton"),d=document.getElementById("coordinatesInput");function c(e,t,n){const o=document.createElement("div");o.classList.add("post");const s=(new Date).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});o.innerHTML=`\n      <div class="post__header">\n        <span class="post__date">${s}</span>\n      </div>\n      <p class="p post__text">${e}</p>\n      <p class="p post__geo">[${t}, ${n}]</p>\n    `,document.querySelector(".container__posts").prepend(o)}s.addEventListener("keypress",(e=>{"Enter"===e.key&&""!==s.value.trim()&&function(){const e=s.value.trim();navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:o}=t.coords;c(e,n,o),s.value=""}),(()=>{i.style.display="flex"})):alert("Geolocation не поддерживается вашим браузером")}()})),a.addEventListener("click",(()=>{const e=d.value.trim();try{const{latitude:t,longitude:n}=o(e);c(s.value,t,n),i.style.display="none",s.value=""}catch(e){alert(e.message)}})),r.addEventListener("click",(()=>{i.style.display="none"}));const l=document.getElementById("videoRecordingModal"),u=document.getElementById("videoRecordButton"),p=document.getElementById("stopVideoRecordingButton"),g=l.querySelector("video");let v,y,m=[];function f(e,t,n){const o=URL.createObjectURL(e),s=document.createElement("div");s.classList.add("post"),s.classList.add("post__video");const i=(new Date).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});s.innerHTML=`\n        <div class="post__header">\n          <span class="post__date">${i}</span>\n        </div>\n        <video controls class="videoPlayer" src="${o}">\n        </video>\n        <p class="p post__geo">[${t}, ${n}]</p>\n      `,document.querySelector(".container__posts").prepend(s)}u.addEventListener("click",(async()=>{y=await navigator.mediaDevices.getUserMedia({video:!0}),v=new MediaRecorder(y),m=[],g.srcObject=y,g.play(),l.style.display="flex",v.addEventListener("start",(()=>{console.log("start")})),v.addEventListener("dataavailable",(e=>{m.push(e.data)})),v.addEventListener("stop",(()=>{new Blob(m)})),v.start(),p.addEventListener("click",(()=>{v&&"recording"===v.state&&v.stop(),v.onstop=async()=>{const e=new Blob(m,{type:"video/mp4"});navigator.geolocation.getCurrentPosition((t=>{const{latitude:n,longitude:o}=t.coords;f(e,n,o),l.style.display="none"}),(()=>{f(e,"Неизвестная","локация"),l.style.display="none"})),y.getTracks().forEach((e=>e.stop())),g.srcObject=null}}))}))},944:function(e){e.exports=function(e){const t=e.replace(/[\[\]\s]/g,""),[n,o]=t.split(",");if(!n||isNaN(n)||!o||isNaN(o))throw new Error("Некорректный формат координат");return{latitude:parseFloat(n),longitude:parseFloat(o)}}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";n(25)}()}();
//# sourceMappingURL=bundle.js.map