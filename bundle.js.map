{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://timeline/./src/js/index.js","webpack://timeline/./src/js/validateCoordinates.js","webpack://timeline/webpack/bootstrap","webpack://timeline/webpack/runtime/compat get default export","webpack://timeline/webpack/runtime/define property getters","webpack://timeline/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["const validateCoordinates = require(\"./validateCoordinates\");\n\n// Получение ссылки на элементы\nconst postInput = document.getElementById(\"postInput\");\nconst coordinateModal = document.getElementById(\"coordinateModal\");\nconst okButton = document.getElementById(\"okButton\");\nconst cancelButton = document.getElementById(\"cancelButton\");\nconst coordinatesInput = document.getElementById(\"coordinatesInput\");\n\nlet isRecordingAudio = false;\nlet isRecordingVideo = false;\n\n// Функция для запроса координат\nfunction requestCoordinates() {\n  const postText = postInput.value.trim();\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const { latitude, longitude } = position.coords;\n        addPostWithCoordinates(postText, latitude, longitude);\n        postInput.value = \"\";\n      },\n      () => {\n        coordinateModal.style.display = \"flex\";\n      }\n    );\n  } else {\n    alert(\"Geolocation не поддерживается вашим браузером\");\n  }\n}\n\n// Функция для добавления поста с текстом\nfunction addPostWithCoordinates(text, latitude, longitude) {\n  const post = document.createElement(\"div\");\n  post.classList.add(\"post\");\n\n  const now = new Date();\n  const formattedDate = now.toLocaleString(\"ru-RU\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n\n  post.innerHTML = `\n      <div class=\"post__header\">\n        <span class=\"post__date\">${formattedDate}</span>\n      </div>\n      <p class=\"p post__text\">${text}</p>\n      <p class=\"p post__geo\">[${latitude}, ${longitude}]</p>\n    `;\n\n  document.querySelector(\".container__posts\").prepend(post);\n}\n\n// Обработка нажатия Enter в поле ввода\npostInput.addEventListener(\"keypress\", (event) => {\n  if (event.key === \"Enter\" && postInput.value.trim() !== \"\") {\n    requestCoordinates();\n  }\n});\n\n// Обработка кнопки ОК в модальном окне\nokButton.addEventListener(\"click\", () => {\n  const coords = coordinatesInput.value.trim();\n  try {\n    const { latitude, longitude } = validateCoordinates(coords);\n    addPostWithCoordinates(postInput.value, latitude, longitude);\n    coordinateModal.style.display = \"none\";\n    postInput.value = \"\";\n  } catch (error) {\n    alert(error.message);\n  }\n});\n\n// Обработка кнопки Отмена в модальном окне\ncancelButton.addEventListener(\"click\", () => {\n  coordinateModal.style.display = \"none\";\n});\n\n//! ......... ЛОГИКА ДЛЯ ЗАПИСИ ВИДЕО .......\n\nconst modalVideo = document.getElementById(\"videoRecordingModal\");\nconst videoRecordButton = document.getElementById(\"videoRecordButton\");\nconst stopVideoRecordingButton = document.getElementById(\n  \"stopVideoRecordingButton\"\n);\nconst videoElement = modalVideo.querySelector(\"video\");\n\nlet mediaRecorder;\nlet videoChunks = [];\nlet stream;\n\n// Функция для добавления видео в пост\nfunction addPostWithVideo(videoBlob, latitude, longitude) {\n  const videoUrl = URL.createObjectURL(videoBlob);\n  const post = document.createElement(\"div\");\n  post.classList.add(\"post\");\n  post.classList.add(\"post__video\");\n\n  const now = new Date();\n  const formattedDate = now.toLocaleString(\"ru-RU\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n\n  post.innerHTML = `\n        <div class=\"post__header\">\n          <span class=\"post__date\">${formattedDate}</span>\n        </div>\n        <video controls class=\"videoPlayer\" src=\"${videoUrl}\">\n        </video>\n        <p class=\"p post__geo\">[${latitude}, ${longitude}]</p>\n      `;\n\n  document.querySelector(\".container__posts\").prepend(post);\n}\n\n// Начало записи видео\nvideoRecordButton.addEventListener(\"click\", async () => {\n  stream = await navigator.mediaDevices.getUserMedia({\n    video: true,\n    audio: true,\n  });\n  mediaRecorder = new MediaRecorder(stream);\n  videoChunks = [];\n  isRecordingVideo = true;\n\n  // Отобразить видео в реальном времени в модальном окне без звука\n  videoElement.srcObject = stream;\n  videoElement.muted = true;\n  videoElement.play();\n\n  modalVideo.style.display = \"flex\"; // Показать модальное окно записи видео\n  stopVideoRecordingButton.focus(); // Установить фокус на кнопке \"Остановить запись\"\n\n  mediaRecorder.addEventListener(\"dataavailable\", (event) => {\n    videoChunks.push(event.data);\n  });\n\n  mediaRecorder.start();\n\n  function stopVideoRecording() {\n    if (mediaRecorder && mediaRecorder.state === \"recording\") {\n      mediaRecorder.stop();\n    }\n    isRecordingVideo = false;\n    mediaRecorder.onstop = async () => {\n      const videoBlob = new Blob(videoChunks, { type: \"video/mp4\" });\n\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          addPostWithVideo(videoBlob, latitude, longitude);\n          modalVideo.style.display = \"none\";\n        },\n        () => {\n          addPostWithVideo(videoBlob, \"Неизвестная\", \"локация\");\n          modalVideo.style.display = \"none\";\n        }\n      );\n\n      stream.getTracks().forEach((track) => track.stop());\n      videoElement.srcObject = null;\n    };\n  }\n\n  document.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"Enter\" && isRecordingVideo) {\n      stopVideoRecording();\n    }\n  });\n\n  stopVideoRecordingButton.addEventListener(\"click\", stopVideoRecording);\n});\n\n//! ......... ЛОГИКА ДЛЯ ЗАПИСИ АУДИО .......\n\nconst modalAudio = document.getElementById(\"audioRecordingModal\");\nconst audioRecordButton = document.getElementById(\"audioRecordButton\");\nconst stopAudioRecordingButton = document.getElementById(\n  \"stopAudioRecordingButton\"\n);\nconst recordingIndicator = modalAudio.querySelector(\".recording-indicator\");\n\nlet audioChunks = [];\nlet audioStream;\n\n// Функция для добавления аудио в пост\nfunction addPostWithAudio(audioBlob, latitude, longitude) {\n  const audioUrl = URL.createObjectURL(audioBlob);\n  const post = document.createElement(\"div\");\n  post.classList.add(\"post\");\n\n  const now = new Date();\n  const formattedDate = now.toLocaleString(\"ru-RU\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n\n  post.innerHTML = `\n        <div class=\"post__header\">\n          <span class=\"post__date\">${formattedDate}</span>\n        </div>\n        <audio controls src=\"${audioUrl}\"></audio>\n        <p class=\"p post__geo\">[${latitude}, ${longitude}]</p>\n      `;\n\n  document.querySelector(\".container__posts\").prepend(post);\n}\n\n// Начало записи аудио\naudioRecordButton.addEventListener(\"click\", async () => {\n  audioStream = await navigator.mediaDevices.getUserMedia({ audio: true });\n  mediaRecorder = new MediaRecorder(audioStream);\n  audioChunks = [];\n  isRecordingAudio = true;\n\n  recordingIndicator.style.display = \"block\";\n  modalAudio.style.display = \"flex\"; // Показать модальное окно записи аудио\n  stopAudioRecordingButton.focus(); // Установить фокус на кнопке \"Остановить запись\"\n\n  mediaRecorder.addEventListener(\"dataavailable\", (event) => {\n    audioChunks.push(event.data);\n  });\n\n  mediaRecorder.start();\n\n  function stopAudioRecording() {\n    if (mediaRecorder && mediaRecorder.state === \"recording\") {\n      mediaRecorder.stop();\n    }\n    isRecordingAudio = false;\n    mediaRecorder.onstop = async () => {\n      const audioBlob = new Blob(audioChunks, { type: \"audio/mp3\" });\n\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          addPostWithAudio(audioBlob, latitude, longitude);\n          modalAudio.style.display = \"none\";\n          recordingIndicator.style.display = \"none\";\n        },\n        () => {\n          addPostWithAudio(audioBlob, \"Неизвестная\", \"локация\");\n          modalAudio.style.display = \"none\";\n          recordingIndicator.style.display = \"none\";\n        }\n      );\n\n      audioStream.getTracks().forEach((track) => track.stop());\n    };\n  }\n\n  document.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"Enter\" && isRecordingAudio) {\n      stopAudioRecording();\n    }\n  });\n\n  stopAudioRecordingButton.addEventListener(\"click\", stopAudioRecording);\n});\n","// Функция для валидации координат\nfunction validateCoordinates(input) {\n  // Удаляем квадратные скобки и пробелы, если они есть\n  const sanitizedInput = input.replace(/[\\[\\]\\s]/g, \"\");\n  // Разделяем координаты по запятой\n  const [latitude, longitude] = sanitizedInput.split(\",\");\n  // Проверка, что обе части являются числами\n  if (!latitude || isNaN(latitude) || !longitude || isNaN(longitude)) {\n    throw new Error(\"Некорректный формат координат\");\n  }\n  return {\n    latitude: parseFloat(latitude),\n    longitude: parseFloat(longitude),\n  };\n}\n\nmodule.exports = validateCoordinates;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }"],"names":["validateCoordinates","require","postInput","document","getElementById","coordinateModal","okButton","cancelButton","coordinatesInput","isRecordingAudio","isRecordingVideo","addPostWithCoordinates","text","latitude","longitude","post","createElement","classList","add","formattedDate","Date","toLocaleString","day","month","year","hour","minute","innerHTML","querySelector","prepend","addEventListener","event","key","value","trim","postText","navigator","geolocation","getCurrentPosition","position","coords","style","display","alert","requestCoordinates","error","message","modalVideo","videoRecordButton","stopVideoRecordingButton","videoElement","mediaRecorder","stream","videoChunks","addPostWithVideo","videoBlob","videoUrl","URL","createObjectURL","async","stopVideoRecording","state","stop","onstop","Blob","type","getTracks","forEach","track","srcObject","mediaDevices","getUserMedia","video","audio","MediaRecorder","muted","play","focus","push","data","start","modalAudio","audioRecordButton","stopAudioRecordingButton","recordingIndicator","audioStream","audioChunks","addPostWithAudio","audioBlob","audioUrl","stopAudioRecording","module","exports","input","sanitizedInput","replace","split","isNaN","Error","parseFloat","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}